<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>S3 GFS Retention | Thoughts, stories and ideas</title>
<meta name=keywords content="Python,AWS,S3,Home Assistant,Automation"><meta name=description content="Keeping S3 backups under control with a GFS retention policy and a tiny Lambda."><meta name=author content="Michael Bisbjerg"><link rel=canonical href=https://blog.mbwarez.dk/posts/2026/01/s3-gfs-retention/><link crossorigin=anonymous href=/assets/css/stylesheet.36ab24e4c1b924360adfc391166b0e8914323d9d6ffa42a50f9c6c435c5e1831.css integrity="sha256-Nqsk5MG5JDYK38ORFmsOiRQyPZ1v+kKlD5xsQ1xeGDE=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.mbwarez.dk/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.mbwarez.dk/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.mbwarez.dk/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.mbwarez.dk/apple-touch-icon.png><link rel=mask-icon href=https://blog.mbwarez.dk/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.mbwarez.dk/posts/2026/01/s3-gfs-retention/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://blog.mbwarez.dk/posts/2026/01/s3-gfs-retention/"><meta property="og:site_name" content="Thoughts, stories and ideas"><meta property="og:title" content="S3 GFS Retention"><meta property="og:description" content="Keeping S3 backups under control with a GFS retention policy and a tiny Lambda."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-01-12T00:00:00+00:00"><meta property="article:modified_time" content="2026-01-12T00:00:00+00:00"><meta property="article:tag" content="Python"><meta property="article:tag" content="AWS"><meta property="article:tag" content="S3"><meta property="article:tag" content="Home Assistant"><meta property="article:tag" content="Automation"><meta property="og:image" content="https://blog.mbwarez.dk/assets/images/cover.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.mbwarez.dk/assets/images/cover.jpg"><meta name=twitter:title content="S3 GFS Retention"><meta name=twitter:description content="Keeping S3 backups under control with a GFS retention policy and a tiny Lambda."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.mbwarez.dk/posts/"},{"@type":"ListItem","position":2,"name":"S3 GFS Retention","item":"https://blog.mbwarez.dk/posts/2026/01/s3-gfs-retention/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"S3 GFS Retention","name":"S3 GFS Retention","description":"Keeping S3 backups under control with a GFS retention policy and a tiny Lambda.","keywords":["Python","AWS","S3","Home Assistant","Automation"],"articleBody":"Home Assistant makes daily backups. Mine include metrics, which means about 1.8 GB per day. After six months, that was roughly 350 GB sitting in S3. I wanted to keep the safety of a long history without paying for every single day forever.\nSo I wrote a small script that applies a Grandfather-father-son (GFS) retention policy to any S3 bucket with timestamped objects. It keeps a rolling set of daily, weekly, and monthly backups and prunes the rest.\nThe Script: GFS Retention for Any S3 Backup The script lives here: MBW.Tool.S3GFSRetainer\nThe Readme has the full setup, examples, and rationale: Readme\nThe core idea is simple:\nExecute the script regularly, possibly even from a serverless system like AWS Lambda Extract a timestamp from each object key using a regex. Group objects that belong to the same backup run. Keep the newest N daily, weekly, and monthly groups. Delete old groups once the minimum retention is satisfied. Because it is just a regex and a timestamp format, it works for more than Home Assistant. Any tool that writes timestamped files to S3 can use the same pattern.\nThese are the two required environment variables:\nS3_BUCKET: S3 bucket name to scan. S3_GFS_REGEX: Regex that captures the timestamp in a single group. And a couple of optional ones I use a lot:\nS3_GFS_KEEP_DAILY: How many daily backup groups to keep. S3_GFS_KEEP_MONTHLY: How many monthly backup groups to keep. S3_GFS_DRY_RUN: Start with this set to true to test without deleting. There are more knobs in the Readme, including the timestamp format and the minimum remaining group count.\nMy Setup: S3 -\u003e SQS -\u003e Lambda I run the script as a Lambda, triggered by S3 events that are fan-out to an SQS queue. That keeps the Lambda decoupled from the S3 event stream and lets me retry cleanly.\nThe flow is:\nS3 bucket receives a new backup object. S3 sends a notification to SQS. I could send directly from S3 -\u003e Lambda, but I use SQS to introduce an artificial 2 minute delay. This is to ensure the metadata file from HA has arrived. Lambda processes the queue and runs the retention script. The Lambda is idempotent and only removes older groups, so it is safe to run on every new backup. The Readme has the exact IAM permissions and handler settings I used.\nCost Notes and Storage Classes I ran three rough scenarios to sanity-check costs. These are back-of-napkin numbers for eu-central-1, 1 object per day at 1.8 GB, and they ignore request, retrieval, and transfer charges. Your mileage will vary, and this is just for comparison.\nConstants and constraints I used:\nStorage prices (approx): Standard $0.0245/GB-month, Glacier Flexible $0.0036/GB-month, Deep Archive $0.0010/GB-month. Minimum storage durations: some classes require having the object for at least N days, such as: Glacier Flexible at 90 days and Deep Archive at 180 days. Objects land in Standard by default unless you set a storage class. Transition costs exist (and minimum-storage penalties apply on early deletes), but they are negligible at this scale, as we only make one object each day. Scenario 1: All Standard, keep 180 days - baseline without any effort Policy: Standard only, keep every daily for 180 days, then expire. Effective storage: 180 objects * 1.8 GB = ~324 GB. Rough cost: 324 * $0.0245 = ~$7.9/month (about $95/year). Scenario 2: Standard then Glacier Flexible at day 30, keep 180 days - baseline with very simple lifecycle policy Policy: Standard for 30 days, then transition to Glacier Flexible, expire at 180 days. Effective storage: ~54 GB in Standard + ~270 GB in Glacier Flexible. Rough cost: (54 * $0.0245) + (270 * $0.0036) = ~$2.3/month (about $28/year). Notes: keeps all dailies, lower cost, and the 90-day minimum is naturally satisfied. Scenario 3: GFS + Deep Archive after ~16 days, keep monthlies for 12 months Policy: GFS prunes most dailies, keeps up to two weeklies (expire around day 15), then only monthlies survive. Those survivors transition to Deep Archive at ~16 days and expire at 12 months. As keeping 1 object each month is practically free, we can expand to a full 12 months of monthlies at (almost) no added cost. Effective storage: ~15 recent objects in Standard (~27 GB) + ~11.5 monthlies in Deep Archive (~21 GB). Rough cost: (27 * $0.0245) + (21 * $0.0010) = ~$0.68-0.70/month (about $8-9/year). Notes: Deep Archive minimum storage is 180 days. Quick comparison:\nScenario Monthly cost Keeps all dailies Complexity 1. All Standard ~$7.9 Yes Low 2. Std -\u003e Glacier Flexible ~$2.3 Yes Low 3. GFS + Deep Archive ~$0.7 No (monthlies only) Medium Diagnostics The script outputs logs, which can be seen in the console. If you’re in Lambda like me, logs are written to CloudWatch.\nThings to watch out for There is an issue on the HA issue tracker on having the S3 backup be able to set a storage class. If this is not possible, all objects arrive as Standard storage, even though IA might make more sense.\nWrap-up I now keep a meaningful backup history without storing hundreds of daily copies forever. The script is tiny, the retention logic is explicit, and the pipeline is easy to reuse for any S3-based backup workflow.\nIf you want to try it, start with the Readme and a dry run. Once the regex matches your backup naming scheme, the rest is just policy.\n","wordCount":"897","inLanguage":"en","image":"https://blog.mbwarez.dk/assets/images/cover.jpg","datePublished":"2026-01-12T00:00:00Z","dateModified":"2026-01-12T00:00:00Z","author":{"@type":"Person","name":"Michael Bisbjerg"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.mbwarez.dk/posts/2026/01/s3-gfs-retention/"},"publisher":{"@type":"Organization","name":"Thoughts, stories and ideas","logo":{"@type":"ImageObject","url":"https://blog.mbwarez.dk/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.mbwarez.dk/ accesskey=h title="Thoughts, stories and ideas (Alt + H)">Thoughts, stories and ideas</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.mbwarez.dk/archives title="All posts"><span>All posts</span></a></li><li><a href=https://blog.mbwarez.dk/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://blog.mbwarez.dk/tags title=Tags><span>Tags</span></a></li><li><a href=https://github.com/LordMike/ title=Github><span>Github</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://www.linkedin.com/in/michael-bisbjerg/ title=LinkedIn><span>LinkedIn</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.mbwarez.dk/>Home</a>&nbsp;»&nbsp;<a href=https://blog.mbwarez.dk/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">S3 GFS Retention</h1><div class=post-description>Keeping S3 backups under control with a GFS retention policy and a tiny Lambda.</div><div class=post-meta><span title='2026-01-12 00:00:00 +0000 UTC'>January 12, 2026</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Michael Bisbjerg</div></header><div class=post-content><p>Home Assistant makes daily backups. Mine include metrics, which means about 1.8 GB per day. After six months, that was roughly 350 GB sitting in S3. I wanted to keep the safety of a long history without paying for every single day forever.</p><p>So I wrote a small script that applies a <a href=https://en.wikipedia.org/wiki/Grandfather-father-son>Grandfather-father-son (GFS)</a> retention policy to any S3 bucket with timestamped objects. It keeps a rolling set of daily, weekly, and monthly backups and prunes the rest.</p><hr><h2 id=the-script-gfs-retention-for-any-s3-backup>The Script: GFS Retention for Any S3 Backup<a hidden class=anchor aria-hidden=true href=#the-script-gfs-retention-for-any-s3-backup>#</a></h2><p>The script lives here: <a href=https://github.com/LordMike/MBW.Tool.S3GFSRetainer>MBW.Tool.S3GFSRetainer</a><br>The Readme has the full setup, examples, and rationale: <a href=https://github.com/LordMike/MBW.Tool.S3GFSRetainer/blob/main/Readme.md>Readme</a></p><p>The core idea is simple:</p><ul><li>Execute the script regularly, possibly even from a serverless system like AWS Lambda</li><li>Extract a timestamp from each object key using a regex.</li><li>Group objects that belong to the same backup run.</li><li>Keep the newest N daily, weekly, and monthly groups.</li><li>Delete old groups once the minimum retention is satisfied.</li></ul><p>Because it is just a regex and a timestamp format, it works for more than Home Assistant. Any tool that writes timestamped files to S3 can use the same pattern.</p><p>These are the two required environment variables:</p><ul><li><code>S3_BUCKET</code>: S3 bucket name to scan.</li><li><code>S3_GFS_REGEX</code>: Regex that captures the timestamp in a single group.</li></ul><p>And a couple of optional ones I use a lot:</p><ul><li><code>S3_GFS_KEEP_DAILY</code>: How many daily backup groups to keep.</li><li><code>S3_GFS_KEEP_MONTHLY</code>: How many monthly backup groups to keep.</li><li><code>S3_GFS_DRY_RUN</code>: Start with this set to true to test without deleting.</li></ul><p>There are more knobs in the Readme, including the timestamp format and the minimum remaining group count.</p><hr><h2 id=my-setup-s3---sqs---lambda>My Setup: S3 -> SQS -> Lambda<a hidden class=anchor aria-hidden=true href=#my-setup-s3---sqs---lambda>#</a></h2><p>I run the script as a Lambda, triggered by S3 events that are fan-out to an SQS queue. That keeps the Lambda decoupled from the S3 event stream and lets me retry cleanly.</p><p>The flow is:</p><ul><li>S3 bucket receives a new backup object.</li><li>S3 sends a notification to SQS.<ul><li>I could send directly from S3 -> Lambda, but I use SQS to introduce an artificial 2 minute delay. This is to ensure the metadata file from HA has arrived.</li></ul></li><li>Lambda processes the queue and runs the retention script.</li></ul><p>The Lambda is idempotent and only removes older groups, so it is safe to run on every new backup. The Readme has the exact IAM permissions and handler settings I used.</p><hr><h2 id=cost-notes-and-storage-classes>Cost Notes and Storage Classes<a hidden class=anchor aria-hidden=true href=#cost-notes-and-storage-classes>#</a></h2><p>I ran three rough scenarios to sanity-check costs. These are back-of-napkin numbers for <code>eu-central-1</code>, 1 object per day at 1.8 GB, and they ignore request, retrieval, and transfer charges. Your mileage will vary, and this is just for comparison.</p><p>Constants and constraints I used:</p><ul><li>Storage prices (approx): Standard $0.0245/GB-month, Glacier Flexible $0.0036/GB-month, Deep Archive $0.0010/GB-month.</li><li>Minimum storage durations: some classes require having the object for at least N days, such as: Glacier Flexible at 90 days and Deep Archive at 180 days.</li><li>Objects land in Standard by default unless you set a storage class.</li><li>Transition costs exist (and minimum-storage penalties apply on early deletes), but they are negligible at this scale, as we only make one object each day.</li></ul><h3 id=scenario-1-all-standard-keep-180-days---baseline-without-any-effort>Scenario 1: All Standard, keep 180 days - baseline without any effort<a hidden class=anchor aria-hidden=true href=#scenario-1-all-standard-keep-180-days---baseline-without-any-effort>#</a></h3><ul><li>Policy: Standard only, keep every daily for 180 days, then expire.</li><li>Effective storage: 180 objects * 1.8 GB = ~324 GB.</li><li>Rough cost: 324 * $0.0245 = <strong>~$7.9/month</strong> (about <strong>$95/year</strong>).</li></ul><h3 id=scenario-2-standard-then-glacier-flexible-at-day-30-keep-180-days---baseline-with-very-simple-lifecycle-policy>Scenario 2: Standard then Glacier Flexible at day 30, keep 180 days - baseline with very simple lifecycle policy<a hidden class=anchor aria-hidden=true href=#scenario-2-standard-then-glacier-flexible-at-day-30-keep-180-days---baseline-with-very-simple-lifecycle-policy>#</a></h3><ul><li>Policy: Standard for 30 days, then transition to Glacier Flexible, expire at 180 days.</li><li>Effective storage: ~54 GB in Standard + ~270 GB in Glacier Flexible.</li><li>Rough cost: (54 * $0.0245) + (270 * $0.0036) = <strong>~$2.3/month</strong> (about <strong>$28/year</strong>).</li><li>Notes: keeps all dailies, lower cost, and the 90-day minimum is naturally satisfied.</li></ul><h3 id=scenario-3-gfs--deep-archive-after-16-days-keep-monthlies-for-12-months>Scenario 3: GFS + Deep Archive after ~16 days, keep monthlies for 12 months<a hidden class=anchor aria-hidden=true href=#scenario-3-gfs--deep-archive-after-16-days-keep-monthlies-for-12-months>#</a></h3><ul><li>Policy: GFS prunes most dailies, keeps up to two weeklies (expire around day 15), then only monthlies survive. Those survivors transition to Deep Archive at ~16 days and expire at 12 months.<ul><li>As keeping 1 object each month is practically free, we can expand to a full 12 months of monthlies at (almost) no added cost.</li></ul></li><li>Effective storage: ~15 recent objects in Standard (~27 GB) + ~11.5 monthlies in Deep Archive (~21 GB).</li><li>Rough cost: (27 * $0.0245) + (21 * $0.0010) = <strong>~$0.68-0.70/month</strong> (about <strong>$8-9/year</strong>).</li><li>Notes: Deep Archive minimum storage is 180 days.</li></ul><p>Quick comparison:</p><table><thead><tr><th>Scenario</th><th>Monthly cost</th><th>Keeps all dailies</th><th>Complexity</th></tr></thead><tbody><tr><td>1. All Standard</td><td>~$7.9</td><td>Yes</td><td>Low</td></tr><tr><td>2. Std -> Glacier Flexible</td><td>~$2.3</td><td>Yes</td><td>Low</td></tr><tr><td>3. GFS + Deep Archive</td><td>~$0.7</td><td>No (monthlies only)</td><td>Medium</td></tr></tbody></table><hr><h2 id=diagnostics>Diagnostics<a hidden class=anchor aria-hidden=true href=#diagnostics>#</a></h2><p>The script outputs logs, which can be seen in the console. If you&rsquo;re in Lambda like me, logs are written to CloudWatch.</p><h2 id=things-to-watch-out-for>Things to watch out for<a hidden class=anchor aria-hidden=true href=#things-to-watch-out-for>#</a></h2><p>There is <a href=https://github.com/home-assistant/core/issues/144565>an issue on the HA issue tracker</a> on having the S3 backup be able to set a storage class. If this is not possible, all objects arrive as Standard storage, even though IA might make more sense.</p><hr><h2 id=wrap-up>Wrap-up<a hidden class=anchor aria-hidden=true href=#wrap-up>#</a></h2><p>I now keep a meaningful backup history without storing hundreds of daily copies forever. The script is tiny, the retention logic is explicit, and the pipeline is easy to reuse for any S3-based backup workflow.</p><p>If you want to try it, start with the Readme and a dry run. Once the regex matches your backup naming scheme, the rest is just policy.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.mbwarez.dk/tags/python/>Python</a></li><li><a href=https://blog.mbwarez.dk/tags/aws/>AWS</a></li><li><a href=https://blog.mbwarez.dk/tags/s3/>S3</a></li><li><a href=https://blog.mbwarez.dk/tags/home-assistant/>Home Assistant</a></li><li><a href=https://blog.mbwarez.dk/tags/automation/>Automation</a></li></ul><nav class=paginav><a class=prev href=https://blog.mbwarez.dk/posts/2026/01/logic-group-zdb5100-blueprint/><span class=title>« Prev</span><br><span>Home Assistant blueprint for Logic Group ZDB5100 (and ZBA7140)</span>
</a><a class=next href=https://blog.mbwarez.dk/posts/2025/07/ha-stove-fan-power-automation/><span class=title>Next »</span><br><span>One Metric to Rule Them All: Making a Dumb Stove Fan Smart with Only Watts</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share S3 GFS Retention on x" href="https://x.com/intent/tweet/?text=S3%20GFS%20Retention&amp;url=https%3a%2f%2fblog.mbwarez.dk%2fposts%2f2026%2f01%2fs3-gfs-retention%2f&amp;hashtags=Python%2cAWS%2cS3%2cHomeAssistant%2cAutomation"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share S3 GFS Retention on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.mbwarez.dk%2fposts%2f2026%2f01%2fs3-gfs-retention%2f&amp;title=S3%20GFS%20Retention&amp;summary=S3%20GFS%20Retention&amp;source=https%3a%2f%2fblog.mbwarez.dk%2fposts%2f2026%2f01%2fs3-gfs-retention%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share S3 GFS Retention on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.mbwarez.dk%2fposts%2f2026%2f01%2fs3-gfs-retention%2f&title=S3%20GFS%20Retention"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share S3 GFS Retention on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.mbwarez.dk%2fposts%2f2026%2f01%2fs3-gfs-retention%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share S3 GFS Retention on whatsapp" href="https://api.whatsapp.com/send?text=S3%20GFS%20Retention%20-%20https%3a%2f%2fblog.mbwarez.dk%2fposts%2f2026%2f01%2fs3-gfs-retention%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share S3 GFS Retention on telegram" href="https://telegram.me/share/url?text=S3%20GFS%20Retention&amp;url=https%3a%2f%2fblog.mbwarez.dk%2fposts%2f2026%2f01%2fs3-gfs-retention%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share S3 GFS Retention on ycombinator" href="https://news.ycombinator.com/submitlink?t=S3%20GFS%20Retention&u=https%3a%2f%2fblog.mbwarez.dk%2fposts%2f2026%2f01%2fs3-gfs-retention%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>© <a href=https://github.com/LordMike>Michael Bisbjerg</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>